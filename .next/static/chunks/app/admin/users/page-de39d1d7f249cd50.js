(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[674],{8660:function(e,a,t){Promise.resolve().then(t.bind(t,3539))},3539:function(e,a,t){"use strict";t.r(a);var s=t(1844),l=t(5784),o=t(5513),i=t(8073),n=t(1664),r=t.n(n);let d=e=>{var a,t;let{data:n}=e,{error:d,deleteUser:c,clearErrors:u}=(0,l.useContext)(i.Z);(0,l.useEffect)(()=>{d&&(toast.error(d),u())},[d]);let v=e=>{c(e)};return(0,s.jsxs)("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg",children:[(0,s.jsxs)("h1",{className:"text-3xl my-5 ml-4 font-bold",children:[null==n?void 0:n.users.length," Users"]}),(0,s.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,s.jsx)("thead",{className:"text-l text-gray-700 uppercase",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Name"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Email"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Role"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:null==n?void 0:null===(a=n.users)||void 0===a?void 0:a.map(e=>(0,s.jsxs)("tr",{className:"bg-white",children:[(0,s.jsx)("td",{className:"px-6 py-2",children:null==e?void 0:e.name}),(0,s.jsx)("td",{className:"px-6 py-2",children:null==e?void 0:e.email}),(0,s.jsx)("td",{className:"px-6 py-2",children:null==e?void 0:e.role}),(0,s.jsx)("td",{className:"px-6 py-2",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(r(),{href:"/admin/users/".concat(null==e?void 0:e._id),className:"px-2 py-2 inline-block text-yellow-600 bg-white shadow-sm border border-gray-200 rounded-md hover:bg-gray-100 cursor-pointer mr-2",children:(0,s.jsx)("i",{className:"fa fa-pencil","aria-hidden":"true"})}),(0,s.jsx)("a",{className:"px-2 py-2 inline-block text-red-600 bg-white shadow-sm border border-gray-200 rounded-md hover:bg-gray-100 cursor-pointer",onClick:()=>v(null==e?void 0:e._id),children:(0,s.jsx)("i",{className:"fa fa-trash","aria-hidden":"true"})})]})})]},null==e?void 0:e._id))})]}),(null==n?void 0:null===(t=n.users)||void 0===t?void 0:t.length)>(null==n?void 0:n.resPerPage)&&(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(o.Z,{resPerPage:null==n?void 0:n.resPerPage,productsCount:null==n?void 0:n.ordersCount})})]})};a.default=d},5513:function(e,a,t){"use strict";var s=t(1844),l=t(9332);t(5784);var o=t(8447);let i=e=>{let a,{resPerPage:t,productsCount:i}=e,n=(0,l.useRouter)(),r=(0,l.useSearchParams)(),d=r.get("page")||1;d=Number(d);let c=e=>{{(a=new URLSearchParams(window.location.search)).has("page")?a.set("page",e):a.append("page",e);let t=window.location.pathname+"?"+a.toString();n.push(t)}};return(0,s.jsx)("div",{className:"flex mt-20 justify-center",children:(0,s.jsx)(o.Z,{activePage:d,itemsCountPerPage:t,totalItemsCount:i,onChange:c,nextPageText:"Next",prevPageText:"Prev",firstPageText:"First",lastPageText:"Last",itemClass:"relative inline-flex items-center border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-500 hover:bg-gray-50 focus:z-20",activeLinkClassName:"z-10 inline-flex items-center border border-indigo-500 bg-indigo-50 text-sm font-medium text-indigo-600 focus:z-20",activeClass:"z-10 inline-flex items-center border border-indigo-500 bg-indigo-50 text-sm font-medium text-indigo-600 focus:z-20"})})};a.Z=i},8073:function(e,a,t){"use strict";t.d(a,{H:function(){return r}});var s=t(1844),l=t(8433),o=t(9332),i=t(5784);let n=(0,i.createContext)(),r=e=>{let{children:a}=e,[t,r]=(0,i.useState)(null),[d,c]=(0,i.useState)(null),[u,v]=(0,i.useState)(null),[p,h]=(0,i.useState)(!1),m=(0,o.useRouter)(),x=async e=>{let{name:a,email:t,password:s}=e;try{let{data:e}=await l.Z.post("".concat("http://localhost:3000","/api/auth/register"),{name:a,email:t,password:s});(null==e?void 0:e.user)&&m.push("/")}catch(e){var o,i;c(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(i=o.data)||void 0===i?void 0:i.message)}},g=async()=>{try{v(!0);let{data:e}=await l.Z.get("/api/auth/session?update");(null==e?void 0:e.user)&&(r(e.user),m.replace("/me"))}catch(t){var e,a;c(null==t?void 0:null===(e=t.response)||void 0===e?void 0:null===(a=e.data)||void 0===a?void 0:a.message)}},y=async e=>{try{v(!0);let{data:a}=await l.Z.put("".concat("http://localhost:3000","/api/auth/me/update"),e,{headers:{"Content-Type":"multipart/form-data"}});(null==a?void 0:a.user)&&(g(),v(!1))}catch(e){var a,t;v(!1),c(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)}},f=async e=>{let{currentPassword:a,newPassword:t}=e;try{let{data:e}=await l.Z.put("".concat("http://localhost:3000","/api/auth/me/update_password"),{currentPassword:a,newPassword:t});(null==e?void 0:e.success)&&m.replace("/me")}catch(e){var s,o;console.log(e.response),c(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(o=s.data)||void 0===o?void 0:o.message)}},b=async(e,a)=>{try{let{data:t}=await l.Z.put("".concat("http://localhost:3000","/api/admin/users/").concat(e),{userData:a});(null==t?void 0:t.success)&&(h(!0),m.replace("/admin/users/".concat(e)))}catch(e){var t,s;c(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)}},w=async e=>{try{let{data:a}=await l.Z.delete("".concat("http://localhost:3000","/api/admin/users/").concat(e));(null==a?void 0:a.success)&&m.replace("/admin/users")}catch(e){var a,t;c(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)}},j=async e=>{try{let{data:a}=await l.Z.post("".concat("http://localhost:3000","/api/address"),e);a&&m.push("/me")}catch(e){var a,t;c(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)}},N=async(e,a)=>{try{let{data:t}=await l.Z.put("".concat("http://localhost:3000","/api/address/").concat(e),a);(null==t?void 0:t.address)&&(h(!0),m.replace("/address/".concat(e)))}catch(e){var t,s;c(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)}},P=async e=>{try{let{data:a}=await l.Z.delete("".concat("http://localhost:3000","/api/address/").concat(e));(null==a?void 0:a.success)&&m.push("/me")}catch(e){var a,t;c(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)}},C=()=>{c(null)};return(0,s.jsx)(n.Provider,{value:{user:t,error:d,loading:u,updated:p,updateUser:b,deleteUser:w,setUpdated:h,setUser:r,registerUser:x,updateProfile:y,updatePassword:f,addNewAddress:j,updateAddress:N,deleteAddress:P,clearErrors:C},children:a})};a.Z=n}},function(e){e.O(0,[996,664,447,17,744],function(){return e(e.s=8660)}),_N_E=e.O()}]);