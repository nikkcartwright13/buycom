(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[674],{8660:function(e,t,s){Promise.resolve().then(s.bind(s,3539))},3539:function(e,t,s){"use strict";s.r(t);var a=s(1844),l=s(5784),r=s(5513),o=s(8073),i=s(1664),n=s.n(i);let c=e=>{var t,s;let{data:i}=e,{error:c,deleteUser:d,clearErrors:u}=(0,l.useContext)(o.Z);(0,l.useEffect)(()=>{c&&(toast.error(c),u())},[c]);let p=e=>{d(e)};return(0,a.jsxs)("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg",children:[(0,a.jsxs)("h1",{className:"text-3xl my-5 ml-4 font-bold",children:[null==i?void 0:i.users.length," Users"]}),(0,a.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,a.jsx)("thead",{className:"text-l text-gray-700 uppercase",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Name"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Email"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Role"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:null==i?void 0:null===(t=i.users)||void 0===t?void 0:t.map(e=>(0,a.jsxs)("tr",{className:"bg-white",children:[(0,a.jsx)("td",{className:"px-6 py-2",children:null==e?void 0:e.name}),(0,a.jsx)("td",{className:"px-6 py-2",children:null==e?void 0:e.email}),(0,a.jsx)("td",{className:"px-6 py-2",children:null==e?void 0:e.role}),(0,a.jsx)("td",{className:"px-6 py-2",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(n(),{href:"/admin/users/".concat(null==e?void 0:e._id),className:"px-2 py-2 inline-block text-yellow-600 bg-white shadow-sm border border-gray-200 rounded-md hover:bg-gray-100 cursor-pointer mr-2",children:(0,a.jsx)("i",{className:"fa fa-pencil","aria-hidden":"true"})}),(0,a.jsx)("a",{className:"px-2 py-2 inline-block text-red-600 bg-white shadow-sm border border-gray-200 rounded-md hover:bg-gray-100 cursor-pointer",onClick:()=>p(null==e?void 0:e._id),children:(0,a.jsx)("i",{className:"fa fa-trash","aria-hidden":"true"})})]})})]},null==e?void 0:e._id))})]}),(null==i?void 0:null===(s=i.users)||void 0===s?void 0:s.length)>(null==i?void 0:i.resPerPage)&&(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(r.Z,{resPerPage:null==i?void 0:i.resPerPage,productsCount:null==i?void 0:i.ordersCount})})]})};t.default=c},5513:function(e,t,s){"use strict";var a=s(1844),l=s(9332);s(5784);var r=s(8447);let o=e=>{let t,{resPerPage:s,productsCount:o}=e,i=(0,l.useRouter)(),n=(0,l.useSearchParams)(),c=n.get("page")||1;c=Number(c);let d=e=>{{(t=new URLSearchParams(window.location.search)).has("page")?t.set("page",e):t.append("page",e);let s=window.location.pathname+"?"+t.toString();i.push(s)}};return(0,a.jsx)("div",{className:"flex mt-20 justify-center",children:(0,a.jsx)(r.Z,{activePage:c,itemsCountPerPage:s,totalItemsCount:o,onChange:d,nextPageText:"Next",prevPageText:"Prev",firstPageText:"First",lastPageText:"Last",itemClass:"relative inline-flex items-center border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-500 hover:bg-gray-50 focus:z-20",activeLinkClassName:"z-10 inline-flex items-center border border-indigo-500 bg-indigo-50 text-sm font-medium text-indigo-600 focus:z-20",activeClass:"z-10 inline-flex items-center border border-indigo-500 bg-indigo-50 text-sm font-medium text-indigo-600 focus:z-20"})})};t.Z=o},8073:function(e,t,s){"use strict";s.d(t,{H:function(){return n}});var a=s(1844),l=s(8433),r=s(9332),o=s(5784);let i=(0,o.createContext)(),n=e=>{let{children:t}=e,[s,n]=(0,o.useState)(null),[c,d]=(0,o.useState)(null),[u,p]=(0,o.useState)(null),[v,m]=(0,o.useState)(!1),h=(0,r.useRouter)(),x=async e=>{let{name:t,email:s,password:a}=e;try{let{data:e}=await l.Z.post("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/auth/register"),{name:t,email:s,password:a});(null==e?void 0:e.user)&&h.push("/")}catch(e){var r,o;d(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(o=r.data)||void 0===o?void 0:o.message)}},g=async()=>{try{p(!0);let{data:e}=await l.Z.get("/api/auth/session?update");(null==e?void 0:e.user)&&(n(e.user),h.replace("/me"))}catch(s){var e,t;d(null==s?void 0:null===(e=s.response)||void 0===e?void 0:null===(t=e.data)||void 0===t?void 0:t.message)}},y=async e=>{try{p(!0);let{data:t}=await l.Z.put("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/auth/me/update"),e,{headers:{"Content-Type":"multipart/form-data"}});(null==t?void 0:t.user)&&(g(),p(!1))}catch(e){var t,s;p(!1),d(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)}},f=async e=>{let{currentPassword:t,newPassword:s}=e;try{let{data:e}=await l.Z.put("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/auth/me/update_password"),{currentPassword:t,newPassword:s});(null==e?void 0:e.success)&&h.replace("/me")}catch(e){var a,r;console.log(e.response),d(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)}},j=async(e,t)=>{try{let{data:s}=await l.Z.put("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/admin/users/").concat(e),{userData:t});(null==s?void 0:s.success)&&(m(!0),h.replace("/admin/users/".concat(e)))}catch(e){var s,a;d(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)}},b=async e=>{try{let{data:t}=await l.Z.delete("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/admin/users/").concat(e));(null==t?void 0:t.success)&&h.replace("/admin/users")}catch(e){var t,s;d(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)}},w=async e=>{try{let{data:t}=await l.Z.post("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/address"),e);t&&h.push("/me")}catch(e){var t,s;d(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)}},N=async(e,t)=>{try{let{data:s}=await l.Z.put("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/address/").concat(e),t);(null==s?void 0:s.address)&&(m(!0),h.replace("/address/".concat(e)))}catch(e){var s,a;d(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)}},k=async e=>{try{let{data:t}=await l.Z.delete("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/address/").concat(e));(null==t?void 0:t.success)&&h.push("/me")}catch(e){var t,s;d(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)}},P=()=>{d(null)};return(0,a.jsx)(i.Provider,{value:{user:s,error:c,loading:u,updated:v,updateUser:j,deleteUser:b,setUpdated:m,setUser:n,registerUser:x,updateProfile:y,updatePassword:f,addNewAddress:w,updateAddress:N,deleteAddress:k,clearErrors:P},children:t})};t.Z=i}},function(e){e.O(0,[996,664,447,17,744],function(){return e(e.s=8660)}),_N_E=e.O()}]);