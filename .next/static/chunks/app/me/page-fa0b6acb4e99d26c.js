(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[359],{2515:function(e,s,a){Promise.resolve().then(a.bind(a,2755))},2755:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return o}});var t=a(1844),l=a(5784),n=a(1664),r=a.n(n);let c=e=>{let{addresses:s}=e;return null==s?void 0:s.map(e=>(0,t.jsx)(r(),{href:"/address/".concat(e._id),children:(0,t.jsx)("div",{className:"mb-5 gap-4",children:(0,t.jsxs)("figure",{className:"w-full flex align-center bg-gray-100 p-4 rounded-md cursor-pointer",children:[(0,t.jsx)("div",{className:"mr-3",children:(0,t.jsx)("span",{className:"flex items-center justify-center text-yellow-500 w-12 h-12 bg-white rounded-full shadow mt-2",children:(0,t.jsx)("i",{className:"fa fa-map-marker-alt"})})}),(0,t.jsx)("figcaption",{className:"text-gray-600",children:(0,t.jsxs)("p",{children:[e.street," ",(0,t.jsx)("br",{})," ",e.city,", ",e.state,","," ",e.zipCode,", ",e.country,(0,t.jsx)("br",{}),"Phone no: ",e.phoneNo]})})]})})},e._id))};var i=a(8073);let d=e=>{var s;let{addresses:a}=e,{user:n}=(0,l.useContext)(i.Z);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("figure",{className:"flex items-start sm:items-center",children:[(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)("img",{className:"w-16 h-16 rounded-full mr-4",src:(null==n?void 0:n.avatar)?null==n?void 0:null===(s=n.avatar)||void 0===s?void 0:s.url:"/images/default.png",alt:null==n?void 0:n.name})}),(0,t.jsxs)("figcaption",{children:[(0,t.jsx)("h5",{className:"font-semibold text-lg",children:null==n?void 0:n.name}),(0,t.jsxs)("p",{children:[(0,t.jsx)("b",{children:"Email:"})," ",null==n?void 0:n.email," | ",(0,t.jsx)("b",{children:"Joined On:"}),null==n?void 0:n.createdAt.substring(0,10)]})]})]}),(0,t.jsx)("hr",{className:"my-4"}),(0,t.jsx)(c,{addresses:a}),(0,t.jsx)(r(),{href:"/address/new",children:(0,t.jsxs)("button",{className:"px-4 py-2 inline-block text-blue-600 border border-gray-300 rounded-md hover:bg-gray-100",children:[(0,t.jsx)("i",{className:"mr-1 fa fa-plus"})," Add new address"]})}),(0,t.jsx)("hr",{className:"my-4"})]})};var o=d},8073:function(e,s,a){"use strict";a.d(s,{H:function(){return i}});var t=a(1844),l=a(8433),n=a(9332),r=a(5784);let c=(0,r.createContext)(),i=e=>{let{children:s}=e,[a,i]=(0,r.useState)(null),[d,o]=(0,r.useState)(null),[u,p]=(0,r.useState)(null),[v,m]=(0,r.useState)(!1),h=(0,n.useRouter)(),j=async e=>{let{name:s,email:a,password:t}=e;try{let{data:e}=await l.Z.post("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/auth/register"),{name:s,email:a,password:t});(null==e?void 0:e.user)&&h.push("/")}catch(e){var n,r;o(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(r=n.data)||void 0===r?void 0:r.message)}},g=async()=>{try{p(!0);let{data:e}=await l.Z.get("/api/auth/session?update");(null==e?void 0:e.user)&&(i(e.user),h.replace("/me"))}catch(a){var e,s;o(null==a?void 0:null===(e=a.response)||void 0===e?void 0:null===(s=e.data)||void 0===s?void 0:s.message)}},f=async e=>{try{p(!0);let{data:s}=await l.Z.put("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/auth/me/update"),e,{headers:{"Content-Type":"multipart/form-data"}});(null==s?void 0:s.user)&&(g(),p(!1))}catch(e){var s,a;p(!1),o(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)}},y=async e=>{let{currentPassword:s,newPassword:a}=e;try{let{data:e}=await l.Z.put("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/auth/me/update_password"),{currentPassword:s,newPassword:a});(null==e?void 0:e.success)&&h.replace("/me")}catch(e){var t,n;console.log(e.response),o(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.message)}},x=async(e,s)=>{try{let{data:a}=await l.Z.put("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/admin/users/").concat(e),{userData:s});(null==a?void 0:a.success)&&(m(!0),h.replace("/admin/users/".concat(e)))}catch(e){var a,t;o(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)}},w=async e=>{try{let{data:s}=await l.Z.delete("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/admin/users/").concat(e));(null==s?void 0:s.success)&&h.replace("/admin/users")}catch(e){var s,a;o(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)}},b=async e=>{try{let{data:s}=await l.Z.post("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/address"),e);s&&h.push("/me")}catch(e){var s,a;o(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)}},k=async(e,s)=>{try{let{data:a}=await l.Z.put("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/address/").concat(e),s);(null==a?void 0:a.address)&&(m(!0),h.replace("/address/".concat(e)))}catch(e){var a,t;o(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)}},N=async e=>{try{let{data:s}=await l.Z.delete("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/address/").concat(e));(null==s?void 0:s.success)&&h.push("/me")}catch(e){var s,a;o(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)}},Z=()=>{o(null)};return(0,t.jsx)(c.Provider,{value:{user:a,error:d,loading:u,updated:v,updateUser:x,deleteUser:w,setUpdated:m,setUser:i,registerUser:j,updateProfile:f,updatePassword:y,addNewAddress:b,updateAddress:k,deleteAddress:N,clearErrors:Z},children:s})};s.Z=c}},function(e){e.O(0,[996,664,17,744],function(){return e(e.s=2515)}),_N_E=e.O()}]);