(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[29,183],{6745:function(e,l,s){Promise.resolve().then(s.bind(s,2326))},2326:function(e,l,s){"use strict";s.r(l);var t=s(1844),a=s(8073),d=s(3299),r=s(1664),o=s.n(r),n=s(5784);let c=()=>{let{user:e}=(0,n.useContext)(a.Z),l=()=>{(0,d.signOut)()};return(0,t.jsx)("aside",{className:"md:w-1/3 lg:w-1/4 px-4",children:(0,t.jsxs)("ul",{className:"sidebar",children:[(null==e?void 0:e.role)==="admin"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("li",{children:[" ",(0,t.jsxs)(o(),{href:"/admin/products/new",className:"block px-3 py-2 text-gray-800 hover:bg-blue-100 hover:text-blue-500 rounded-md",children:["New Product ",(0,t.jsx)("span",{className:"text-red-500",children:"(Admin)"})]})]}),(0,t.jsxs)("li",{children:[" ",(0,t.jsxs)(o(),{href:"/admin/products",className:"block px-3 py-2 text-gray-800 hover:bg-blue-100 hover:text-blue-500 rounded-md",children:["All Products ",(0,t.jsx)("span",{className:"text-red-500",children:"(Admin)"})]})]}),(0,t.jsxs)("li",{children:[" ",(0,t.jsxs)(o(),{href:"/admin/orders",className:"block px-3 py-2 text-gray-800 hover:bg-blue-100 hover:text-blue-500 rounded-md",children:["All Orders ",(0,t.jsx)("span",{className:"text-red-500",children:"(Admin)"})]})]}),(0,t.jsxs)("li",{children:[" ",(0,t.jsxs)(o(),{href:"/admin/users",className:"block px-3 py-2 text-gray-800 hover:bg-blue-100 hover:text-blue-500 rounded-md",children:["All Users ",(0,t.jsx)("span",{className:"text-red-500",children:"(Admin)"})]})]}),(0,t.jsx)("hr",{})]}),(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(o(),{href:"/me",className:"block px-3 py-2 text-gray-800 hover:bg-blue-100 hover:text-blue-500 rounded-md",children:"Your Profile"})]}),(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(o(),{href:"/me/orders",className:"block px-3 py-2 text-gray-800 hover:bg-blue-100 hover:text-blue-500 rounded-md",children:"Orders"})]}),(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(o(),{href:"/me/update",className:"block px-3 py-2 text-gray-800 hover:bg-blue-100 hover:text-blue-500 rounded-md",children:"Update Profile"})]}),(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(o(),{href:"/me/update_password",className:"block px-3 py-2 text-gray-800 hover:bg-blue-100 hover:text-blue-500 rounded-md",children:"Update Password"})]}),(0,t.jsxs)("li",{children:[" ",(0,t.jsx)("a",{className:"block px-3 py-2 text-red-800 hover:bg-red-100 hover:text-white-500 rounded-md cursor-pointer",onClick:l,children:"Logout"})]})]})})};l.default=c},8073:function(e,l,s){"use strict";s.d(l,{H:function(){return n}});var t=s(1844),a=s(8433),d=s(9332),r=s(5784);let o=(0,r.createContext)(),n=e=>{let{children:l}=e,[s,n]=(0,r.useState)(null),[c,i]=(0,r.useState)(null),[u,h]=(0,r.useState)(null),[v,p]=(0,r.useState)(!1),m=(0,d.useRouter)(),x=async e=>{let{name:l,email:s,password:t}=e;try{let{data:e}=await a.Z.post("".concat("http://localhost:3000","/api/auth/register"),{name:l,email:s,password:t});(null==e?void 0:e.user)&&m.push("/")}catch(e){var d,r;i(null==e?void 0:null===(d=e.response)||void 0===d?void 0:null===(r=d.data)||void 0===r?void 0:r.message)}},b=async()=>{try{h(!0);let{data:e}=await a.Z.get("/api/auth/session?update");(null==e?void 0:e.user)&&(n(e.user),m.replace("/me"))}catch(s){var e,l;i(null==s?void 0:null===(e=s.response)||void 0===e?void 0:null===(l=e.data)||void 0===l?void 0:l.message)}},y=async e=>{try{h(!0);let{data:l}=await a.Z.put("".concat("http://localhost:3000","/api/auth/me/update"),e,{headers:{"Content-Type":"multipart/form-data"}});(null==l?void 0:l.user)&&(b(),h(!1))}catch(e){var l,s;h(!1),i(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(s=l.data)||void 0===s?void 0:s.message)}},g=async e=>{let{currentPassword:l,newPassword:s}=e;try{let{data:e}=await a.Z.put("".concat("http://localhost:3000","/api/auth/me/update_password"),{currentPassword:l,newPassword:s});(null==e?void 0:e.success)&&m.replace("/me")}catch(e){var t,d;console.log(e.response),i(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(d=t.data)||void 0===d?void 0:d.message)}},j=async(e,l)=>{try{let{data:s}=await a.Z.put("".concat("http://localhost:3000","/api/admin/users/").concat(e),{userData:l});(null==s?void 0:s.success)&&(p(!0),m.replace("/admin/users/".concat(e)))}catch(e){var s,t;i(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)}},f=async e=>{try{let{data:l}=await a.Z.delete("".concat("http://localhost:3000","/api/admin/users/").concat(e));(null==l?void 0:l.success)&&m.replace("/admin/users")}catch(e){var l,s;i(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(s=l.data)||void 0===s?void 0:s.message)}},w=async e=>{try{let{data:l}=await a.Z.post("".concat("http://localhost:3000","/api/address"),e);l&&m.push("/me")}catch(e){var l,s;i(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(s=l.data)||void 0===s?void 0:s.message)}},N=async(e,l)=>{try{let{data:s}=await a.Z.put("".concat("http://localhost:3000","/api/address/").concat(e),l);(null==s?void 0:s.address)&&(p(!0),m.replace("/address/".concat(e)))}catch(e){var s,t;i(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)}},k=async e=>{try{let{data:l}=await a.Z.delete("".concat("http://localhost:3000","/api/address/").concat(e));(null==l?void 0:l.success)&&m.push("/me")}catch(e){var l,s;i(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(s=l.data)||void 0===s?void 0:s.message)}},Z=()=>{i(null)};return(0,t.jsx)(o.Provider,{value:{user:s,error:c,loading:u,updated:v,updateUser:j,deleteUser:f,setUpdated:p,setUser:n,registerUser:x,updateProfile:y,updatePassword:g,addNewAddress:w,updateAddress:N,deleteAddress:k,clearErrors:Z},children:l})};l.Z=o}},function(e){e.O(0,[996,664,299,17,744],function(){return e(e.s=6745)}),_N_E=e.O()}]);