(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[359],{2515:function(e,a,s){Promise.resolve().then(s.bind(s,2755))},2755:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return c}});var l=s(1844),t=s(5784),n=s(1664),d=s.n(n);let i=e=>{let{addresses:a}=e;return null==a?void 0:a.map(e=>(0,l.jsx)(d(),{href:"/address/".concat(e._id),children:(0,l.jsx)("div",{className:"mb-5 gap-4",children:(0,l.jsxs)("figure",{className:"w-full flex align-center bg-gray-100 p-4 rounded-md cursor-pointer",children:[(0,l.jsx)("div",{className:"mr-3",children:(0,l.jsx)("span",{className:"flex items-center justify-center text-yellow-500 w-12 h-12 bg-white rounded-full shadow mt-2",children:(0,l.jsx)("i",{className:"fa fa-map-marker-alt"})})}),(0,l.jsx)("figcaption",{className:"text-gray-600",children:(0,l.jsxs)("p",{children:[e.street," ",(0,l.jsx)("br",{})," ",e.city,", ",e.state,","," ",e.zipCode,", ",e.country,(0,l.jsx)("br",{}),"Phone no: ",e.phoneNo]})})]})})},e._id))};var o=s(8073);let r=e=>{var a;let{addresses:s}=e,{user:n}=(0,t.useContext)(o.Z);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("figure",{className:"flex items-start sm:items-center",children:[(0,l.jsx)("div",{className:"relative",children:(0,l.jsx)("img",{className:"w-16 h-16 rounded-full mr-4",src:(null==n?void 0:n.avatar)?null==n?void 0:null===(a=n.avatar)||void 0===a?void 0:a.url:"/images/default.png",alt:null==n?void 0:n.name})}),(0,l.jsxs)("figcaption",{children:[(0,l.jsx)("h5",{className:"font-semibold text-lg",children:null==n?void 0:n.name}),(0,l.jsxs)("p",{children:[(0,l.jsx)("b",{children:"Email:"})," ",null==n?void 0:n.email," | ",(0,l.jsx)("b",{children:"Joined On:"}),null==n?void 0:n.createdAt.substring(0,10)]})]})]}),(0,l.jsx)("hr",{className:"my-4"}),(0,l.jsx)(i,{addresses:s}),(0,l.jsx)(d(),{href:"/address/new",children:(0,l.jsxs)("button",{className:"px-4 py-2 inline-block text-blue-600 border border-gray-300 rounded-md hover:bg-gray-100",children:[(0,l.jsx)("i",{className:"mr-1 fa fa-plus"})," Add new address"]})}),(0,l.jsx)("hr",{className:"my-4"})]})};var c=r},8073:function(e,a,s){"use strict";s.d(a,{H:function(){return o}});var l=s(1844),t=s(8433),n=s(9332),d=s(5784);let i=(0,d.createContext)(),o=e=>{let{children:a}=e,[s,o]=(0,d.useState)(null),[r,c]=(0,d.useState)(null),[u,v]=(0,d.useState)(null),[h,p]=(0,d.useState)(!1),m=(0,n.useRouter)(),x=async e=>{let{name:a,email:s,password:l}=e;try{let{data:e}=await t.Z.post("".concat("http://localhost:3000","/api/auth/register"),{name:a,email:s,password:l});(null==e?void 0:e.user)&&m.push("/")}catch(e){var n,d;c(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(d=n.data)||void 0===d?void 0:d.message)}},g=async()=>{try{v(!0);let{data:e}=await t.Z.get("/api/auth/session?update");(null==e?void 0:e.user)&&(o(e.user),m.replace("/me"))}catch(s){var e,a;c(null==s?void 0:null===(e=s.response)||void 0===e?void 0:null===(a=e.data)||void 0===a?void 0:a.message)}},f=async e=>{try{v(!0);let{data:a}=await t.Z.put("".concat("http://localhost:3000","/api/auth/me/update"),e,{headers:{"Content-Type":"multipart/form-data"}});(null==a?void 0:a.user)&&(g(),v(!1))}catch(e){var a,s;v(!1),c(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)}},y=async e=>{let{currentPassword:a,newPassword:s}=e;try{let{data:e}=await t.Z.put("".concat("http://localhost:3000","/api/auth/me/update_password"),{currentPassword:a,newPassword:s});(null==e?void 0:e.success)&&m.replace("/me")}catch(e){var l,n;console.log(e.response),c(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(n=l.data)||void 0===n?void 0:n.message)}},j=async(e,a)=>{try{let{data:s}=await t.Z.put("".concat("http://localhost:3000","/api/admin/users/").concat(e),{userData:a});(null==s?void 0:s.success)&&(p(!0),m.replace("/admin/users/".concat(e)))}catch(e){var s,l;c(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(l=s.data)||void 0===l?void 0:l.message)}},w=async e=>{try{let{data:a}=await t.Z.delete("".concat("http://localhost:3000","/api/admin/users/").concat(e));(null==a?void 0:a.success)&&m.replace("/admin/users")}catch(e){var a,s;c(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)}},b=async e=>{try{let{data:a}=await t.Z.post("".concat("http://localhost:3000","/api/address"),e);a&&m.push("/me")}catch(e){var a,s;c(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)}},N=async(e,a)=>{try{let{data:s}=await t.Z.put("".concat("http://localhost:3000","/api/address/").concat(e),a);(null==s?void 0:s.address)&&(p(!0),m.replace("/address/".concat(e)))}catch(e){var s,l;c(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(l=s.data)||void 0===l?void 0:l.message)}},Z=async e=>{try{let{data:a}=await t.Z.delete("".concat("http://localhost:3000","/api/address/").concat(e));(null==a?void 0:a.success)&&m.push("/me")}catch(e){var a,s;c(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)}},_=()=>{c(null)};return(0,l.jsx)(i.Provider,{value:{user:s,error:r,loading:u,updated:h,updateUser:j,deleteUser:w,setUpdated:p,setUser:o,registerUser:x,updateProfile:f,updatePassword:y,addNewAddress:b,updateAddress:N,deleteAddress:Z,clearErrors:_},children:a})};a.Z=i}},function(e){e.O(0,[996,664,17,744],function(){return e(e.s=2515)}),_N_E=e.O()}]);