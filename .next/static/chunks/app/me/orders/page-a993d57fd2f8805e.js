(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[999],{9233:function(e,r,t){Promise.resolve().then(t.bind(t,5721))},5513:function(e,r,t){"use strict";var l=t(1844),i=t(9332);t(5784);var s=t(8447);let n=e=>{let r,{resPerPage:t,productsCount:n}=e,o=(0,i.useRouter)(),a=(0,i.useSearchParams)(),d=a.get("page")||1;d=Number(d);let c=e=>{{(r=new URLSearchParams(window.location.search)).has("page")?r.set("page",e):r.append("page",e);let t=window.location.pathname+"?"+r.toString();o.push(t)}};return(0,l.jsx)("div",{className:"flex mt-20 justify-center",children:(0,l.jsx)(s.Z,{activePage:d,itemsCountPerPage:t,totalItemsCount:n,onChange:c,nextPageText:"Next",prevPageText:"Prev",firstPageText:"First",lastPageText:"Last",itemClass:"relative inline-flex items-center border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-500 hover:bg-gray-50 focus:z-20",activeLinkClassName:"z-10 inline-flex items-center border border-indigo-500 bg-indigo-50 text-sm font-medium text-indigo-600 focus:z-20",activeClass:"z-10 inline-flex items-center border border-indigo-500 bg-indigo-50 text-sm font-medium text-indigo-600 focus:z-20"})})};r.Z=n},5721:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return m}});var l=t(1844),i=t(5784),s=t(5675),n=t.n(s);let o=e=>{var r,t,i,s,o,a,d,c,u,m,v,x,p,g;let{order:h}=e;return(0,l.jsxs)("article",{className:"p-3 lg:p-5 mb-5 bg-white border border-blue-600 rounded-md",children:[(0,l.jsx)("header",{className:"lg:flex justify-between mb-4",children:(0,l.jsxs)("div",{className:"mb-4 lg:mb-0",children:[(0,l.jsxs)("p",{className:"font-semibold",children:[(0,l.jsxs)("span",{children:["Order ID: ",null==h?void 0:h._id," "]}),"• ",(null==h?void 0:h.orderStatus)=="Processing"?(0,l.jsx)("span",{className:"text-red-500",children:null==h?void 0:h.orderStatus.toUpperCase()}):(0,l.jsxs)("span",{className:"text-green-500",children:["• ",null==h?void 0:h.orderStatus.toUpperCase()]})]}),(0,l.jsx)("p",{className:"text-gray-500",children:null==h?void 0:null===(r=h.createAt)||void 0===r?void 0:r.substring(0,10)})]})}),(0,l.jsxs)("div",{className:"grid md:grid-cols-3 gap-2",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gray-400 mb-1",children:"Person"}),(0,l.jsxs)("ul",{className:"text-gray-600",children:[(0,l.jsx)("li",{children:null==h?void 0:null===(t=h.user)||void 0===t?void 0:t.name}),(0,l.jsxs)("li",{children:["Phone: ",null==h?void 0:null===(i=h.shippingInfo)||void 0===i?void 0:i.phoneNo]}),(0,l.jsxs)("li",{children:["Email: ",null==h?void 0:null===(s=h.user)||void 0===s?void 0:s.email]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gray-400 mb-1",children:"Delivery address"}),(0,l.jsxs)("ul",{className:"text-gray-600",children:[(0,l.jsx)("li",{children:null==h?void 0:null===(o=h.shippingInfo)||void 0===o?void 0:o.street}),(0,l.jsxs)("li",{children:[null==h?void 0:null===(a=h.shippingInfo)||void 0===a?void 0:a.city," ",null==h?void 0:null===(d=h.shippingInfo)||void 0===d?void 0:d.state," ",null==h?void 0:null===(c=h.shippingInfo)||void 0===c?void 0:c.zipCode]}),(0,l.jsx)("li",{children:null==h?void 0:null===(u=h.shippingInfo)||void 0===u?void 0:u.country})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gray-400 mb-1",children:"Payment"}),(0,l.jsxs)("ul",{className:"text-gray-600",children:[(0,l.jsx)("li",{className:"text-green-400",children:null==h?void 0:null===(m=h.paymentInfo)||void 0===m?void 0:null===(v=m.status)||void 0===v?void 0:v.toUpperCase()}),(0,l.jsxs)("li",{children:["Tax paid: $",null==h?void 0:null===(x=h.paymentInfo)||void 0===x?void 0:x.taxPaid]}),(0,l.jsxs)("li",{children:["Total paid: $",null==h?void 0:null===(p=h.paymentInfo)||void 0===p?void 0:p.amountPaid]})]})]})]}),(0,l.jsx)("hr",{className:"my-4"}),(0,l.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-2",children:null==h?void 0:null===(g=h.orderItems)||void 0===g?void 0:g.map(e=>(0,l.jsxs)("figure",{className:"flex flex-row mb-4",children:[(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"block w-20 h-20 rounded border border-gray-200 overflow-hidden p-3",children:(0,l.jsx)(n(),{src:null==e?void 0:e.image,height:"60",width:"60",alt:e.name})})}),(0,l.jsxs)("figcaption",{className:"ml-3",children:[(0,l.jsx)("p",{children:e.name.substring(0,35)}),(0,l.jsxs)("p",{className:"mt-1 font-semibold",children:[e.quantity,"x = $",e.price*e.quantity]})]})]}))})]})};var a=t(5513),d=t(4561),c=t(9332);let u=e=>{var r;let{orders:t}=e,{clearCart:s}=(0,i.useContext)(d.C),n=(0,c.useSearchParams)(),u=(0,c.useRouter)(),m=n.get("order_success");return(0,i.useEffect)(()=>{"true"==m&&(s(),u.replace("/me/orders"))},[]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h3",{className:"text-xl font-semibold mb-5",children:"Your Orders"}),null==t?void 0:null===(r=t.orders)||void 0===r?void 0:r.map(e=>(0,l.jsx)(o,{order:e},e.id)),(0,l.jsx)(a.Z,{resPerPage:null==t?void 0:t.resPerPage,productsCount:null==t?void 0:t.ordersCount})]})};var m=u},4561:function(e,r,t){"use strict";t.d(r,{Z:function(){return o}});var l=t(1844),i=t(9332),s=t(5784);let n=(0,s.createContext)(),o=e=>{let{children:r}=e,[t,o]=(0,s.useState)([]),a=(0,i.useRouter)();(0,s.useEffect)(()=>{d()},[]);let d=()=>{o(localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[])},c=async e=>{var r,l;let i,{product:s,name:n,price:o,image:a,stock:c,seller:u,quantity:m=1}=e,v={product:s,name:n,price:o,image:a,stock:c,seller:u,quantity:m},x=null==t?void 0:null===(r=t.cartItems)||void 0===r?void 0:r.find(e=>e.product===v.product);i=x?null==t?void 0:null===(l=t.cartItems)||void 0===l?void 0:l.map(e=>e.product===x.product?v:e):[...(null==t?void 0:t.cartItems)||[],v],localStorage.setItem("cart",JSON.stringify({cartItems:i})),d()},u=e=>{var r;let l=null==t?void 0:null===(r=t.cartItems)||void 0===r?void 0:r.filter(r=>r.product!==e);localStorage.setItem("cart",JSON.stringify({cartItems:l})),d()},m=e=>{let{amount:r,tax:l,totalAmount:i}=e,s={...t,checkoutInfo:{amount:r,tax:l,totalAmount:i}};localStorage.setItem("cart",JSON.stringify(s)),d(),a.push("/shipping")},v=()=>{localStorage.removeItem("cart"),d()};return(0,l.jsx)(n.Provider,{value:{cart:t,addItemToCart:c,saveOnCheckout:m,deleteItemFromCart:u,clearCart:v},children:r})};r.C=n},9803:function(e,r,t){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l=t(5784),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,o=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function d(e,r,t){var l,s={},d=null,c=null;for(l in void 0!==t&&(d=""+t),void 0!==r.key&&(d=""+r.key),void 0!==r.ref&&(c=r.ref),r)n.call(r,l)&&!a.hasOwnProperty(l)&&(s[l]=r[l]);if(e&&e.defaultProps)for(l in r=e.defaultProps)void 0===s[l]&&(s[l]=r[l]);return{$$typeof:i,type:e,key:d,ref:c,props:s,_owner:o.current}}r.Fragment=s,r.jsx=d,r.jsxs=d},1844:function(e,r,t){"use strict";e.exports=t(9803)},9332:function(e,r,t){e.exports=t(19)}},function(e){e.O(0,[675,447,17,744],function(){return e(e.s=9233)}),_N_E=e.O()}]);