(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[278],{95:function(e,a,r){Promise.resolve().then(r.bind(r,1180))},2326:function(e,a,r){"use strict";r.r(a);var s=r(1844),l=r(8073),t=r(3299),d=r(1664),o=r.n(d),n=r(5784);let c=()=>{let{user:e}=(0,n.useContext)(l.Z),a=()=>{(0,t.signOut)()};return(0,s.jsx)("aside",{className:"md:w-1/3 lg:w-1/4 px-4",children:(0,s.jsxs)("ul",{className:"sidebar",children:[(null==e?void 0:e.role)==="admin"&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("li",{children:[" ",(0,s.jsxs)(o(),{href:"/admin/products/new",className:"block px-3 py-2 text-gray-800 hover:bg-blue-100 hover:text-blue-500 rounded-md",children:["New Product ",(0,s.jsx)("span",{className:"text-red-500",children:"(Admin)"})]})]}),(0,s.jsxs)("li",{children:[" ",(0,s.jsxs)(o(),{href:"/admin/products",className:"block px-3 py-2 text-gray-800 hover:bg-blue-100 hover:text-blue-500 rounded-md",children:["All Products ",(0,s.jsx)("span",{className:"text-red-500",children:"(Admin)"})]})]}),(0,s.jsxs)("li",{children:[" ",(0,s.jsxs)(o(),{href:"/admin/orders",className:"block px-3 py-2 text-gray-800 hover:bg-blue-100 hover:text-blue-500 rounded-md",children:["All Orders ",(0,s.jsx)("span",{className:"text-red-500",children:"(Admin)"})]})]}),(0,s.jsxs)("li",{children:[" ",(0,s.jsxs)(o(),{href:"/admin/users",className:"block px-3 py-2 text-gray-800 hover:bg-blue-100 hover:text-blue-500 rounded-md",children:["All Users ",(0,s.jsx)("span",{className:"text-red-500",children:"(Admin)"})]})]}),(0,s.jsx)("hr",{})]}),(0,s.jsxs)("li",{children:[" ",(0,s.jsx)(o(),{href:"/me",className:"block px-3 py-2 text-gray-800 hover:bg-blue-100 hover:text-blue-500 rounded-md",children:"Your Profile"})]}),(0,s.jsxs)("li",{children:[" ",(0,s.jsx)(o(),{href:"/me/orders",className:"block px-3 py-2 text-gray-800 hover:bg-blue-100 hover:text-blue-500 rounded-md",children:"Orders"})]}),(0,s.jsxs)("li",{children:[" ",(0,s.jsx)(o(),{href:"/me/update",className:"block px-3 py-2 text-gray-800 hover:bg-blue-100 hover:text-blue-500 rounded-md",children:"Update Profile"})]}),(0,s.jsxs)("li",{children:[" ",(0,s.jsx)(o(),{href:"/me/update_password",className:"block px-3 py-2 text-gray-800 hover:bg-blue-100 hover:text-blue-500 rounded-md",children:"Update Password"})]}),(0,s.jsxs)("li",{children:[" ",(0,s.jsx)("a",{className:"block px-3 py-2 text-red-800 hover:bg-red-100 hover:text-white-500 rounded-md cursor-pointer",onClick:a,children:"Logout"})]})]})})};a.default=c},1180:function(e,a,r){"use strict";r.r(a);var s=r(1844),l=r(5784),t=r(2326),d=r(3590),o=r(8073);let n=()=>{let{error:e,addNewAddress:a,clearErrors:r}=(0,l.useContext)(o.Z),n=Object.values(d.countries),[c,i]=(0,l.useState)(""),[u,p]=(0,l.useState)(""),[m,h]=(0,l.useState)(""),[v,x]=(0,l.useState)(""),[b,g]=(0,l.useState)(""),[y,j]=(0,l.useState)("");(0,l.useEffect)(()=>{e&&(toast.error(e),r())},[e]);let f=e=>{e.preventDefault(),a({street:c,city:u,state:m,zipCode:v,phoneNo:b,country:y})};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("section",{className:"py-10",children:(0,s.jsx)("div",{className:"container max-w-screen-xl mx-auto px-4",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row -mx-4",children:[(0,s.jsx)(t.default,{}),(0,s.jsx)("main",{className:"md:w-2/3 lg:w-3/4 px-4",children:(0,s.jsx)("div",{style:{maxWidth:"480px"},className:"mt-1 mb-20 p-4 md:p-7 mx-auto rounded bg-white shadow-lg",children:(0,s.jsxs)("form",{onSubmit:f,children:[(0,s.jsx)("h2",{className:"mb-5 text-2xl font-semibold",children:"Add new Address"}),(0,s.jsxs)("div",{className:"mb-4 md:col-span-2",children:[(0,s.jsx)("label",{className:"block mb-1",children:" Street* "}),(0,s.jsx)("input",{className:"appearance-none border border-gray-200 bg-gray-100 rounded-md py-2 px-3 hover:border-gray-400 focus:outline-none focus:border-gray-400 w-full",type:"text",placeholder:"Type your address",value:c,onChange:e=>i(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-x-3",children:[(0,s.jsxs)("div",{className:"mb-4 md:col-span-1",children:[(0,s.jsx)("label",{className:"block mb-1",children:" City "}),(0,s.jsx)("input",{className:"appearance-none border border-gray-200 bg-gray-100 rounded-md py-2 px-3 hover:border-gray-400 focus:outline-none focus:border-gray-400 w-full",type:"text",placeholder:"Type your city",value:u,onChange:e=>p(e.target.value)})]}),(0,s.jsxs)("div",{className:"mb-4 md:col-span-1",children:[(0,s.jsx)("label",{className:"block mb-1",children:" State "}),(0,s.jsx)("input",{className:"appearance-none border border-gray-200 bg-gray-100 rounded-md py-2 px-3 hover:border-gray-400 focus:outline-none focus:border-gray-400 w-full",type:"text",placeholder:"Type state here",value:m,onChange:e=>h(e.target.value)})]})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-x-2",children:[(0,s.jsxs)("div",{className:"mb-4 md:col-span-1",children:[(0,s.jsx)("label",{className:"block mb-1",children:" ZIP code "}),(0,s.jsx)("input",{className:"appearance-none border border-gray-200 bg-gray-100 rounded-md py-2 px-3 hover:border-gray-400 focus:outline-none focus:border-gray-400 w-full",type:"number",placeholder:"Type zip code here",value:v,onChange:e=>x(e.target.value)})]}),(0,s.jsxs)("div",{className:"mb-4 md:col-span-1",children:[(0,s.jsx)("label",{className:"block mb-1",children:" Phone No "}),(0,s.jsx)("input",{className:"appearance-none border border-gray-200 bg-gray-100 rounded-md py-2 px-3 hover:border-gray-400 focus:outline-none focus:border-gray-400 w-full",type:"number",placeholder:"Type phone no here",value:b,onChange:e=>g(e.target.value)})]})]}),(0,s.jsxs)("div",{className:"mb-4 md:col-span-2",children:[(0,s.jsx)("label",{className:"block mb-1",children:" Country "}),(0,s.jsx)("select",{className:"appearance-none border border-gray-200 bg-gray-100 rounded-md py-2 px-3 hover:border-gray-400 focus:outline-none focus:border-gray-400 w-full",value:y,onChange:e=>j(e.target.value),children:n.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.name))})]}),(0,s.jsx)("button",{type:"submit",className:"my-2 px-4 py-2 text-center w-full inline-block text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Add"})]})})})]})})})})};a.default=n},8073:function(e,a,r){"use strict";r.d(a,{H:function(){return n}});var s=r(1844),l=r(8433),t=r(9332),d=r(5784);let o=(0,d.createContext)(),n=e=>{let{children:a}=e,[r,n]=(0,d.useState)(null),[c,i]=(0,d.useState)(null),[u,p]=(0,d.useState)(null),[m,h]=(0,d.useState)(!1),v=(0,t.useRouter)(),x=async e=>{let{name:a,email:r,password:s}=e;try{let{data:e}=await l.Z.post("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/auth/register"),{name:a,email:r,password:s});(null==e?void 0:e.user)&&v.push("/")}catch(e){var t,d;i(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(d=t.data)||void 0===d?void 0:d.message)}},b=async()=>{try{p(!0);let{data:e}=await l.Z.get("/api/auth/session?update");(null==e?void 0:e.user)&&(n(e.user),v.replace("/me"))}catch(r){var e,a;i(null==r?void 0:null===(e=r.response)||void 0===e?void 0:null===(a=e.data)||void 0===a?void 0:a.message)}},g=async e=>{try{p(!0);let{data:a}=await l.Z.put("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/auth/me/update"),e,{headers:{"Content-Type":"multipart/form-data"}});(null==a?void 0:a.user)&&(b(),p(!1))}catch(e){var a,r;p(!1),i(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)}},y=async e=>{let{currentPassword:a,newPassword:r}=e;try{let{data:e}=await l.Z.put("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/auth/me/update_password"),{currentPassword:a,newPassword:r});(null==e?void 0:e.success)&&v.replace("/me")}catch(e){var s,t;console.log(e.response),i(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)}},j=async(e,a)=>{try{let{data:r}=await l.Z.put("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/admin/users/").concat(e),{userData:a});(null==r?void 0:r.success)&&(h(!0),v.replace("/admin/users/".concat(e)))}catch(e){var r,s;i(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)}},f=async e=>{try{let{data:a}=await l.Z.delete("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/admin/users/").concat(e));(null==a?void 0:a.success)&&v.replace("/admin/users")}catch(e){var a,r;i(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)}},N=async e=>{try{let{data:a}=await l.Z.post("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/address"),e);a&&v.push("/me")}catch(e){var a,r;i(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)}},w=async(e,a)=>{try{let{data:r}=await l.Z.put("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/address/").concat(e),a);(null==r?void 0:r.address)&&(h(!0),v.replace("/address/".concat(e)))}catch(e){var r,s;i(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)}},k=async e=>{try{let{data:a}=await l.Z.delete("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/address/").concat(e));(null==a?void 0:a.success)&&v.push("/me")}catch(e){var a,r;i(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)}},C=()=>{i(null)};return(0,s.jsx)(o.Provider,{value:{user:r,error:c,loading:u,updated:m,updateUser:j,deleteUser:f,setUpdated:h,setUser:n,registerUser:x,updateProfile:g,updatePassword:y,addNewAddress:N,updateAddress:w,deleteAddress:k,clearErrors:C},children:a})};a.Z=o}},function(e){e.O(0,[996,664,299,590,17,744],function(){return e(e.s=95)}),_N_E=e.O()}]);