(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[278],{95:function(e,a,l){Promise.resolve().then(l.bind(l,1180))},2326:function(e,a,l){"use strict";l.r(a);var s=l(1844),r=l(8073),t=l(3299),d=l(1664),o=l.n(d),n=l(5784);let c=()=>{let{user:e}=(0,n.useContext)(r.Z),a=()=>{(0,t.signOut)()};return(0,s.jsx)("aside",{className:"md:w-1/3 lg:w-1/4 px-4",children:(0,s.jsxs)("ul",{className:"sidebar",children:[(null==e?void 0:e.role)==="admin"&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("li",{children:[" ",(0,s.jsxs)(o(),{href:"/admin/products/new",className:"block px-3 py-2 text-gray-800 hover:bg-blue-100 hover:text-blue-500 rounded-md",children:["New Product ",(0,s.jsx)("span",{className:"text-red-500",children:"(Admin)"})]})]}),(0,s.jsxs)("li",{children:[" ",(0,s.jsxs)(o(),{href:"/admin/products",className:"block px-3 py-2 text-gray-800 hover:bg-blue-100 hover:text-blue-500 rounded-md",children:["All Products ",(0,s.jsx)("span",{className:"text-red-500",children:"(Admin)"})]})]}),(0,s.jsxs)("li",{children:[" ",(0,s.jsxs)(o(),{href:"/admin/orders",className:"block px-3 py-2 text-gray-800 hover:bg-blue-100 hover:text-blue-500 rounded-md",children:["All Orders ",(0,s.jsx)("span",{className:"text-red-500",children:"(Admin)"})]})]}),(0,s.jsxs)("li",{children:[" ",(0,s.jsxs)(o(),{href:"/admin/users",className:"block px-3 py-2 text-gray-800 hover:bg-blue-100 hover:text-blue-500 rounded-md",children:["All Users ",(0,s.jsx)("span",{className:"text-red-500",children:"(Admin)"})]})]}),(0,s.jsx)("hr",{})]}),(0,s.jsxs)("li",{children:[" ",(0,s.jsx)(o(),{href:"/me",className:"block px-3 py-2 text-gray-800 hover:bg-blue-100 hover:text-blue-500 rounded-md",children:"Your Profile"})]}),(0,s.jsxs)("li",{children:[" ",(0,s.jsx)(o(),{href:"/me/orders",className:"block px-3 py-2 text-gray-800 hover:bg-blue-100 hover:text-blue-500 rounded-md",children:"Orders"})]}),(0,s.jsxs)("li",{children:[" ",(0,s.jsx)(o(),{href:"/me/update",className:"block px-3 py-2 text-gray-800 hover:bg-blue-100 hover:text-blue-500 rounded-md",children:"Update Profile"})]}),(0,s.jsxs)("li",{children:[" ",(0,s.jsx)(o(),{href:"/me/update_password",className:"block px-3 py-2 text-gray-800 hover:bg-blue-100 hover:text-blue-500 rounded-md",children:"Update Password"})]}),(0,s.jsxs)("li",{children:[" ",(0,s.jsx)("a",{className:"block px-3 py-2 text-red-800 hover:bg-red-100 hover:text-white-500 rounded-md cursor-pointer",onClick:a,children:"Logout"})]})]})})};a.default=c},1180:function(e,a,l){"use strict";l.r(a);var s=l(1844),r=l(5784),t=l(2326),d=l(3590),o=l(8073);let n=()=>{let{error:e,addNewAddress:a,clearErrors:l}=(0,r.useContext)(o.Z),n=Object.values(d.countries),[c,i]=(0,r.useState)(""),[u,p]=(0,r.useState)(""),[h,m]=(0,r.useState)(""),[x,v]=(0,r.useState)(""),[b,g]=(0,r.useState)(""),[y,j]=(0,r.useState)("");(0,r.useEffect)(()=>{e&&(toast.error(e),l())},[e]);let f=e=>{e.preventDefault(),a({street:c,city:u,state:h,zipCode:x,phoneNo:b,country:y})};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("section",{className:"py-10",children:(0,s.jsx)("div",{className:"container max-w-screen-xl mx-auto px-4",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row -mx-4",children:[(0,s.jsx)(t.default,{}),(0,s.jsx)("main",{className:"md:w-2/3 lg:w-3/4 px-4",children:(0,s.jsx)("div",{style:{maxWidth:"480px"},className:"mt-1 mb-20 p-4 md:p-7 mx-auto rounded bg-white shadow-lg",children:(0,s.jsxs)("form",{onSubmit:f,children:[(0,s.jsx)("h2",{className:"mb-5 text-2xl font-semibold",children:"Add new Address"}),(0,s.jsxs)("div",{className:"mb-4 md:col-span-2",children:[(0,s.jsx)("label",{className:"block mb-1",children:" Street* "}),(0,s.jsx)("input",{className:"appearance-none border border-gray-200 bg-gray-100 rounded-md py-2 px-3 hover:border-gray-400 focus:outline-none focus:border-gray-400 w-full",type:"text",placeholder:"Type your address",value:c,onChange:e=>i(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-x-3",children:[(0,s.jsxs)("div",{className:"mb-4 md:col-span-1",children:[(0,s.jsx)("label",{className:"block mb-1",children:" City "}),(0,s.jsx)("input",{className:"appearance-none border border-gray-200 bg-gray-100 rounded-md py-2 px-3 hover:border-gray-400 focus:outline-none focus:border-gray-400 w-full",type:"text",placeholder:"Type your city",value:u,onChange:e=>p(e.target.value)})]}),(0,s.jsxs)("div",{className:"mb-4 md:col-span-1",children:[(0,s.jsx)("label",{className:"block mb-1",children:" State "}),(0,s.jsx)("input",{className:"appearance-none border border-gray-200 bg-gray-100 rounded-md py-2 px-3 hover:border-gray-400 focus:outline-none focus:border-gray-400 w-full",type:"text",placeholder:"Type state here",value:h,onChange:e=>m(e.target.value)})]})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-x-2",children:[(0,s.jsxs)("div",{className:"mb-4 md:col-span-1",children:[(0,s.jsx)("label",{className:"block mb-1",children:" ZIP code "}),(0,s.jsx)("input",{className:"appearance-none border border-gray-200 bg-gray-100 rounded-md py-2 px-3 hover:border-gray-400 focus:outline-none focus:border-gray-400 w-full",type:"number",placeholder:"Type zip code here",value:x,onChange:e=>v(e.target.value)})]}),(0,s.jsxs)("div",{className:"mb-4 md:col-span-1",children:[(0,s.jsx)("label",{className:"block mb-1",children:" Phone No "}),(0,s.jsx)("input",{className:"appearance-none border border-gray-200 bg-gray-100 rounded-md py-2 px-3 hover:border-gray-400 focus:outline-none focus:border-gray-400 w-full",type:"number",placeholder:"Type phone no here",value:b,onChange:e=>g(e.target.value)})]})]}),(0,s.jsxs)("div",{className:"mb-4 md:col-span-2",children:[(0,s.jsx)("label",{className:"block mb-1",children:" Country "}),(0,s.jsx)("select",{className:"appearance-none border border-gray-200 bg-gray-100 rounded-md py-2 px-3 hover:border-gray-400 focus:outline-none focus:border-gray-400 w-full",value:y,onChange:e=>j(e.target.value),children:n.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.name))})]}),(0,s.jsx)("button",{type:"submit",className:"my-2 px-4 py-2 text-center w-full inline-block text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Add"})]})})})]})})})})};a.default=n},8073:function(e,a,l){"use strict";l.d(a,{H:function(){return n}});var s=l(1844),r=l(8433),t=l(9332),d=l(5784);let o=(0,d.createContext)(),n=e=>{let{children:a}=e,[l,n]=(0,d.useState)(null),[c,i]=(0,d.useState)(null),[u,p]=(0,d.useState)(null),[h,m]=(0,d.useState)(!1),x=(0,t.useRouter)(),v=async e=>{let{name:a,email:l,password:s}=e;try{let{data:e}=await r.Z.post("".concat("http://localhost:3000","/api/auth/register"),{name:a,email:l,password:s});(null==e?void 0:e.user)&&x.push("/")}catch(e){var t,d;i(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(d=t.data)||void 0===d?void 0:d.message)}},b=async()=>{try{p(!0);let{data:e}=await r.Z.get("/api/auth/session?update");(null==e?void 0:e.user)&&(n(e.user),x.replace("/me"))}catch(l){var e,a;i(null==l?void 0:null===(e=l.response)||void 0===e?void 0:null===(a=e.data)||void 0===a?void 0:a.message)}},g=async e=>{try{p(!0);let{data:a}=await r.Z.put("".concat("http://localhost:3000","/api/auth/me/update"),e,{headers:{"Content-Type":"multipart/form-data"}});(null==a?void 0:a.user)&&(b(),p(!1))}catch(e){var a,l;p(!1),i(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(l=a.data)||void 0===l?void 0:l.message)}},y=async e=>{let{currentPassword:a,newPassword:l}=e;try{let{data:e}=await r.Z.put("".concat("http://localhost:3000","/api/auth/me/update_password"),{currentPassword:a,newPassword:l});(null==e?void 0:e.success)&&x.replace("/me")}catch(e){var s,t;console.log(e.response),i(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)}},j=async(e,a)=>{try{let{data:l}=await r.Z.put("".concat("http://localhost:3000","/api/admin/users/").concat(e),{userData:a});(null==l?void 0:l.success)&&(m(!0),x.replace("/admin/users/".concat(e)))}catch(e){var l,s;i(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(s=l.data)||void 0===s?void 0:s.message)}},f=async e=>{try{let{data:a}=await r.Z.delete("".concat("http://localhost:3000","/api/admin/users/").concat(e));(null==a?void 0:a.success)&&x.replace("/admin/users")}catch(e){var a,l;i(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(l=a.data)||void 0===l?void 0:l.message)}},N=async e=>{try{let{data:a}=await r.Z.post("".concat("http://localhost:3000","/api/address"),e);a&&x.push("/me")}catch(e){var a,l;i(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(l=a.data)||void 0===l?void 0:l.message)}},w=async(e,a)=>{try{let{data:l}=await r.Z.put("".concat("http://localhost:3000","/api/address/").concat(e),a);(null==l?void 0:l.address)&&(m(!0),x.replace("/address/".concat(e)))}catch(e){var l,s;i(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(s=l.data)||void 0===s?void 0:s.message)}},k=async e=>{try{let{data:a}=await r.Z.delete("".concat("http://localhost:3000","/api/address/").concat(e));(null==a?void 0:a.success)&&x.push("/me")}catch(e){var a,l;i(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(l=a.data)||void 0===l?void 0:l.message)}},C=()=>{i(null)};return(0,s.jsx)(o.Provider,{value:{user:l,error:c,loading:u,updated:h,updateUser:j,deleteUser:f,setUpdated:m,setUser:n,registerUser:v,updateProfile:g,updatePassword:y,addNewAddress:N,updateAddress:w,deleteAddress:k,clearErrors:C},children:a})};a.Z=o}},function(e){e.O(0,[996,664,299,590,17,744],function(){return e(e.s=95)}),_N_E=e.O()}]);