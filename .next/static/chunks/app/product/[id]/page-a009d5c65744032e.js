(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[188],{6407:function(e,t,a){Promise.resolve().then(a.bind(a,2568)),Promise.resolve().then(a.bind(a,5153)),Promise.resolve().then(a.bind(a,7572)),Promise.resolve().then(a.bind(a,7076)),Promise.resolve().then(a.bind(a,6887))},6887:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var s=a(1844),l=a(5784),r=a(9503),c=a(4561),n=a(9288),i=a(2905),o=a(8073),d=a(9190),u=a(8016),p=a(2920);let v=e=>{let{product:t}=e,[a,c]=(0,l.useState)(!0),[n,i]=(0,l.useState)(0),[v,m]=(0,l.useState)(""),{user:h}=(0,l.useContext)(o.Z),{error:g,clearErrors:x,postReview:j}=(0,l.useContext)(d.Z);(0,l.useEffect)(()=>{let e=(0,u.Eq)(null==t?void 0:t.reviews,null==h?void 0:h._id);e&&(i(null==e?void 0:e.rating),m(null==e?void 0:e.comment)),g&&(p.Am.error(g),x())},[g,h]);let b=()=>{let e={rating:n,comment:v,productId:null==t?void 0:t._id};j(e),c(!a)};return(0,l.useEffect)(()=>{console.log(t)},[t]),(0,s.jsxs)("div",{children:[(0,s.jsx)("hr",{className:"my-4"}),(0,s.jsx)("h1",{className:"text-gray-500 review-title my-5 text-2xl",children:"Your Review"}),(0,s.jsx)("h3",{children:"Rating"}),(0,s.jsx)("div",{className:"mb-4 mt-3",children:(0,s.jsx)("div",{className:"ratings",children:(0,s.jsx)(r.Z,{rating:n,starRatedColor:"#ffb829",numberOfStars:5,name:"rating",changeRating:e=>i(e)})})}),(0,s.jsxs)("div",{className:"mb-4 mt-5",children:[(0,s.jsx)("label",{className:"block mb-1",children:" Comments "}),(0,s.jsx)("textarea",{rows:"4",className:"appearance-none border border-gray-200 bg-gray-100 rounded-md py-2 px-3 hover:border-gray-400 focus:outline-none focus:border-gray-400 w-1/3",placeholder:"Your review",name:"description",value:v,onChange:e=>m(e.target.value),required:!0})]}),(0,s.jsx)("button",{className:"mt-3 mb-5 px-4 py-2 text-center inline-block text-white bg-yellow-500 border border-transparent rounded-md hover:bg-yellow-600 w-1/3",onClick:()=>b(),children:"Post Review"})]})};var m=a(8747);let h=e=>{let{reviews:t}=e;return(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4",children:null==t?void 0:t.map(e=>{var t,a;return(0,s.jsxs)("article",{className:"block p-6 bg-white max-w-sm rounded-lg border border-gray-200 shadow-md mb-5",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4 space-x-4",children:[(0,s.jsx)("img",{className:"w-10 h-10 rounded-full",src:(null==e?void 0:null===(t=e.useravatar)||void 0===t?void 0:t.url)?null==e?void 0:null===(a=e.useravatar)||void 0===a?void 0:a.url:"/images/default.png",alt:"user"}),(0,s.jsx)("div",{className:"space-y-1 font-medium",children:(0,s.jsxs)("p",{children:[null==e?void 0:e.username,(0,s.jsxs)("time",{className:"block text-sm text-gray-500 dark:text-gray-400",children:["Posted on: ",null==e?void 0:e.createdAt.substring(0,10)]})]})})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center space-x-2 mb-2",children:[(0,s.jsx)("div",{className:"ratings",children:(0,s.jsx)(r.Z,{rating:null==e?void 0:e.rating,starRatedColor:"#ffb829",numberOfStars:5,starDimension:"18px",starSpacing:"1px",name:"rating"})}),(0,s.jsx)("span",{className:"text-yellow-500",children:null==e?void 0:e.rating})]}),(0,s.jsx)("p",{className:"mb-2 font-light text-gray-500 dark:text-gray-400 text-xl",children:null==e?void 0:e.comment})]},null==e?void 0:e._id)})})},g=e=>{var t,a;let{product:o}=e,{addItemToCart:d}=(0,l.useContext)(c.C),{canUserReview:u,canReview:p}=(0,l.useContext)(m.Z),g=(0,l.useRef)(null),x=e=>{g.current.src=e};(0,l.useEffect)(()=>{u(null==o?void 0:o._id)},[]);let j=(null==o?void 0:o.stock)>=1,b=()=>{d({product:o._id,name:o.name,price:o.price,image:o.images[0].url,stock:o.stock,seller:o.seller})};null==o||null===(t=o.name)||void 0===t||t.substring(0,100),null==o||o._id;let f=(0,n.Z)(o.createdAt),y=(0,i.Z)(f,{addSuffix:!0});return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("section",{className:"bg-white py-10",children:(0,s.jsxs)("div",{className:"container max-w-screen-xl mx-auto px-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8 mb-5",children:[(0,s.jsxs)("aside",{children:[(0,s.jsx)("div",{className:"border border-gray-200 shadow-sm p-3 text-center rounded mb-5",children:(0,s.jsx)("img",{ref:g,className:"object-cover inline-block",src:(null==o?void 0:o.images[0])?null==o?void 0:o.images[0].url:"/images/default_product.png",alt:"Product title",width:"340",height:"340"})}),(0,s.jsx)("div",{className:"space-x-2 overflow-auto text-center whitespace-nowrap",children:null==o?void 0:null===(a=o.images)||void 0===a?void 0:a.map(e=>(0,s.jsx)("a",{className:"inline-block border border-gray-200 p-1 rounded-md hover:border-blue-500 cursor-pointer",onClick:()=>x(null==e?void 0:e.url),children:(0,s.jsx)("img",{className:"w-14 h-14",src:e.url,alt:"Product title",width:"500",height:"500"})}))})]}),(0,s.jsxs)("main",{children:[(0,s.jsx)("h2",{className:"font-semibold text-2xl mb-4",children:null==o?void 0:o.name}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center space-x-2 mb-2",children:[(0,s.jsx)("div",{className:"ratings",children:(0,s.jsx)(r.Z,{rating:null==o?void 0:o.ratings,starRatedColor:"#ffb829",numberOfStars:5,starDimension:"20px",starSpacing:"2px",name:"rating"})}),(0,s.jsx)("span",{className:"text-yellow-500",children:null==o?void 0:o.ratings}),(0,s.jsx)("svg",{width:"6px",height:"6px",viewBox:"0 0 6 6",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("circle",{cx:"3",cy:"3",r:"3",fill:"#DBDBDB"})}),(0,s.jsx)("span",{className:"text-green-500",children:"Verified"})]}),(0,s.jsxs)("p",{className:"mb-4 font-semibold text-xl",children:["$",null==o?void 0:o.price]}),(0,s.jsx)("p",{className:"mb-4 text-gray-500",children:null==o?void 0:o.description}),(0,s.jsx)("p",{className:"mb-4 text-gray-500",children:y}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mb-5",children:(0,s.jsxs)("button",{className:"px-4 py-2 inline-block text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",onClick:b,disabled:!j,children:[(0,s.jsx)("i",{className:"fa fa-shopping-cart mr-2"}),"Add to cart"]})}),(0,s.jsxs)("ul",{className:"mb-5",children:[(0,s.jsxs)("li",{className:"mb-1",children:[" ",(0,s.jsx)("b",{className:"font-medium w-36 inline-block",children:"Stock"}),j?(0,s.jsx)("span",{className:"text-green-500",children:"In Stock"}):(0,s.jsx)("span",{className:"text-red-500",children:"Out of Stock"})]}),(0,s.jsxs)("li",{className:"mb-1",children:[" ",(0,s.jsx)("b",{className:"font-medium w-36 inline-block",children:"Category:"}),(0,s.jsx)("span",{className:"text-gray-500",children:null==o?void 0:o.category})]}),(0,s.jsxs)("li",{className:"mb-1",children:[" ",(0,s.jsx)("b",{className:"font-medium w-36 inline-block",children:"Seller / Brand:"}),(0,s.jsx)("span",{className:"text-gray-500",children:null==o?void 0:o.seller})]})]})]})]}),p&&(0,s.jsx)(v,{product:o}),(0,s.jsx)(v,{product:o}),(0,s.jsx)("hr",{}),(0,s.jsxs)("div",{className:"font-semibold",children:[(0,s.jsx)("h1",{className:"text-gray-500 review-title mb-6 mt-10 text-2xl",children:"Other Customers Reviews"}),(0,s.jsx)(h,{reviews:null==o?void 0:o.reviews})]})]})})})};var x=g},8073:function(e,t,a){"use strict";a.d(t,{H:function(){return i}});var s=a(1844),l=a(8433),r=a(9332),c=a(5784);let n=(0,c.createContext)(),i=e=>{let{children:t}=e,[a,i]=(0,c.useState)(null),[o,d]=(0,c.useState)(null),[u,p]=(0,c.useState)(null),[v,m]=(0,c.useState)(!1),h=(0,r.useRouter)(),g=async e=>{let{name:t,email:a,password:s}=e;try{let{data:e}=await l.Z.post("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/auth/register"),{name:t,email:a,password:s});(null==e?void 0:e.user)&&h.push("/")}catch(e){var r,c;d(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(c=r.data)||void 0===c?void 0:c.message)}},x=async()=>{try{p(!0);let{data:e}=await l.Z.get("/api/auth/session?update");(null==e?void 0:e.user)&&(i(e.user),h.replace("/me"))}catch(a){var e,t;d(null==a?void 0:null===(e=a.response)||void 0===e?void 0:null===(t=e.data)||void 0===t?void 0:t.message)}},j=async e=>{try{p(!0);let{data:t}=await l.Z.put("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/auth/me/update"),e,{headers:{"Content-Type":"multipart/form-data"}});(null==t?void 0:t.user)&&(x(),p(!1))}catch(e){var t,a;p(!1),d(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)}},b=async e=>{let{currentPassword:t,newPassword:a}=e;try{let{data:e}=await l.Z.put("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/auth/me/update_password"),{currentPassword:t,newPassword:a});(null==e?void 0:e.success)&&h.replace("/me")}catch(e){var s,r;console.log(e.response),d(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:r.message)}},f=async(e,t)=>{try{let{data:a}=await l.Z.put("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/admin/users/").concat(e),{userData:t});(null==a?void 0:a.success)&&(m(!0),h.replace("/admin/users/".concat(e)))}catch(e){var a,s;d(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)}},y=async e=>{try{let{data:t}=await l.Z.delete("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/admin/users/").concat(e));(null==t?void 0:t.success)&&h.replace("/admin/users")}catch(e){var t,a;d(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)}},w=async e=>{try{let{data:t}=await l.Z.post("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/address"),e);t&&h.push("/me")}catch(e){var t,a;d(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)}},k=async(e,t)=>{try{let{data:a}=await l.Z.put("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/address/").concat(e),t);(null==a?void 0:a.address)&&(m(!0),h.replace("/address/".concat(e)))}catch(e){var a,s;d(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)}},N=async e=>{try{let{data:t}=await l.Z.delete("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/address/").concat(e));(null==t?void 0:t.success)&&h.push("/me")}catch(e){var t,a;d(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)}},S=()=>{d(null)};return(0,s.jsx)(n.Provider,{value:{user:a,error:o,loading:u,updated:v,updateUser:f,deleteUser:y,setUpdated:m,setUser:i,registerUser:g,updateProfile:j,updatePassword:b,addNewAddress:w,updateAddress:k,deleteAddress:N,clearErrors:S},children:t})};t.Z=n},4561:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var s=a(1844),l=a(9332),r=a(5784);let c=(0,r.createContext)(),n=e=>{let{children:t}=e,[a,n]=(0,r.useState)([]),i=(0,l.useRouter)();(0,r.useEffect)(()=>{o()},[]);let o=()=>{n(localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[])},d=async e=>{var t,s;let l,{product:r,name:c,price:n,image:i,stock:d,seller:u,quantity:p=1}=e,v={product:r,name:c,price:n,image:i,stock:d,seller:u,quantity:p},m=null==a?void 0:null===(t=a.cartItems)||void 0===t?void 0:t.find(e=>e.product===v.product);l=m?null==a?void 0:null===(s=a.cartItems)||void 0===s?void 0:s.map(e=>e.product===m.product?v:e):[...(null==a?void 0:a.cartItems)||[],v],localStorage.setItem("cart",JSON.stringify({cartItems:l})),o()},u=e=>{var t;let s=null==a?void 0:null===(t=a.cartItems)||void 0===t?void 0:t.filter(t=>t.product!==e);localStorage.setItem("cart",JSON.stringify({cartItems:s})),o()},p=e=>{let{amount:t,tax:s,totalAmount:l}=e,r={...a,checkoutInfo:{amount:t,tax:s,totalAmount:l}};localStorage.setItem("cart",JSON.stringify(r)),o(),i.push("/shipping")},v=()=>{localStorage.removeItem("cart"),o()};return(0,s.jsx)(c.Provider,{value:{cart:a,addItemToCart:d,saveOnCheckout:p,deleteItemFromCart:u,clearCart:v},children:t})};t.C=c},8747:function(e,t,a){"use strict";a.d(t,{u:function(){return i}});var s=a(1844),l=a(8433),r=a(9332),c=a(5784);let n=(0,c.createContext)(),i=e=>{let{children:t}=e,[a,i]=(0,c.useState)(null),[o,d]=(0,c.useState)(!1),[u,p]=(0,c.useState)(!1),v=(0,r.useRouter)(),m=async(e,t)=>{try{let{data:a}=await l.Z.put("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/admin/orders/").concat(e),t);a.success&&(d(!0),v.replace("/admin/orders/".concat(e)))}catch(e){var a,s;i(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)}},h=async e=>{try{let{data:t}=await l.Z.delete("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/admin/orders/").concat(e));(null==t?void 0:t.success)&&v.replace("/admin/orders")}catch(e){var t,a;i(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)}},g=async e=>{try{let{data:t}=await l.Z.get("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/orders/can_review?productId=").concat(e));(null==t?void 0:t.canReview)&&p(null==t?void 0:t.canReview)}catch(e){var t,a;i(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)}},x=()=>{i(null)};return(0,s.jsx)(n.Provider,{value:{error:a,updated:o,canReview:u,canUserReview:g,setUpdated:d,updateOrder:m,deleteOrder:h,clearErrors:x},children:t})};t.Z=n},9190:function(e,t,a){"use strict";a.d(t,{G:function(){return i}});var s=a(1844),l=a(8433),r=a(9332),c=a(5784);let n=(0,c.createContext)(),i=e=>{let{children:t}=e,[a,i]=(0,c.useState)(null),[o,d]=(0,c.useState)(null),[u,p]=(0,c.useState)(!1),v=(0,r.useRouter)(),m=async(e,t)=>{try{let{data:a}=await l.Z.put("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/admin/products/").concat(t),e);a&&(p(!0),v.replace("/admin/products/".concat(t)))}catch(e){var a,s;i(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)}},h=async e=>{try{let{data:t}=await l.Z.post("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/admin/products"),e);t&&v.replace("/admin/products")}catch(e){var t,a;i(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)}},g=async(e,t)=>{try{d(!0);let{data:a}=await l.Z.post("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/admin/products/upload_images/").concat(t),e,{headers:{"Content-Type":"multipart/form-data"}});(null==a?void 0:a.data)&&(d(!1),v.replace("/admin/products"))}catch(e){var a,s;i(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)}},x=async e=>{try{let{data:t}=await l.Z.delete("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/admin/products/").concat(e));(null==t?void 0:t.success)&&v.replace("/admin/products")}catch(e){var t,a;i(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)}},j=async e=>{try{let{data:t}=await l.Z.put("".concat("https://npmbuycom-c8fjodpc4-nikkcartwrights-projects.vercel.app","/api/products/review"),e);(null==t?void 0:t.success)&&v.replace("/product/".concat(null==e?void 0:e.productId))}catch(e){var t,a;i(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)}},b=()=>{i(null)};return(0,s.jsx)(n.Provider,{value:{error:a,loading:o,updated:u,setUpdated:p,newProduct:h,uploadProductImages:g,updateProduct:m,deleteProduct:x,postReview:j,clearErrors:b},children:t})};t.Z=n},8016:function(e,t,a){"use strict";a.d(t,{Bp:function(){return l},Eq:function(){return r},dk:function(){return s}});let s=(e,t,a)=>{let s=e.has(t);return a&&s?e.set(t,a):a?e.append(t,a):s&&e.delete(t),e},l=e=>{let t=e.replace(/%3A/g,":").replace(/%2F/g,"/");return t},r=(e,t)=>{let a=null;return e.forEach(e=>{var s;(null==e?void 0:null===(s=e.user)||void 0===s?void 0:s._id)===t&&(a=e)}),a}}},function(e){e.O(0,[996,79,17,744],function(){return e(e.s=6407)}),_N_E=e.O()}]);