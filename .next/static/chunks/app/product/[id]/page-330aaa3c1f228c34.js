(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[188],{6407:function(e,t,l){Promise.resolve().then(l.bind(l,2568)),Promise.resolve().then(l.bind(l,5153)),Promise.resolve().then(l.bind(l,7572)),Promise.resolve().then(l.bind(l,7076)),Promise.resolve().then(l.bind(l,6887))},6887:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return g}});var a=l(1844),s=l(5784),r=l(9503),n=l(4561),i=l(9288),o=l(2905),c=l(8073),d=l(9190),u=l(8016),v=l(2920);let m=e=>{let{product:t}=e,[l,n]=(0,s.useState)(!0),[i,o]=(0,s.useState)(0),[m,p]=(0,s.useState)(""),{user:h}=(0,s.useContext)(c.Z),{error:x,clearErrors:g,postReview:b}=(0,s.useContext)(d.Z);(0,s.useEffect)(()=>{let e=(0,u.Eq)(null==t?void 0:t.reviews,null==h?void 0:h._id);e&&(o(null==e?void 0:e.rating),p(null==e?void 0:e.comment)),x&&(v.Am.error(x),g())},[x,h]);let f=()=>{let e={rating:i,comment:m,productId:null==t?void 0:t._id};b(e),n(!l)};return(0,s.useEffect)(()=>{console.log(t)},[t]),(0,a.jsxs)("div",{children:[(0,a.jsx)("hr",{className:"my-4"}),(0,a.jsx)("h1",{className:"text-gray-500 review-title my-5 text-2xl",children:"Your Review"}),(0,a.jsx)("h3",{children:"Rating"}),(0,a.jsx)("div",{className:"mb-4 mt-3",children:(0,a.jsx)("div",{className:"ratings",children:(0,a.jsx)(r.Z,{rating:i,starRatedColor:"#ffb829",numberOfStars:5,name:"rating",changeRating:e=>o(e)})})}),(0,a.jsxs)("div",{className:"mb-4 mt-5",children:[(0,a.jsx)("label",{className:"block mb-1",children:" Comments "}),(0,a.jsx)("textarea",{rows:"4",className:"appearance-none border border-gray-200 bg-gray-100 rounded-md py-2 px-3 hover:border-gray-400 focus:outline-none focus:border-gray-400 w-1/3",placeholder:"Your review",name:"description",value:m,onChange:e=>p(e.target.value),required:!0})]}),(0,a.jsx)("button",{className:"mt-3 mb-5 px-4 py-2 text-center inline-block text-white bg-yellow-500 border border-transparent rounded-md hover:bg-yellow-600 w-1/3",onClick:()=>f(),children:"Post Review"})]})};var p=l(8747);let h=e=>{let{reviews:t}=e;return(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4",children:null==t?void 0:t.map(e=>{var t,l;return(0,a.jsxs)("article",{className:"block p-6 bg-white max-w-sm rounded-lg border border-gray-200 shadow-md mb-5",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4 space-x-4",children:[(0,a.jsx)("img",{className:"w-10 h-10 rounded-full",src:(null==e?void 0:null===(t=e.useravatar)||void 0===t?void 0:t.url)?null==e?void 0:null===(l=e.useravatar)||void 0===l?void 0:l.url:"/images/default.png",alt:"user"}),(0,a.jsx)("div",{className:"space-y-1 font-medium",children:(0,a.jsxs)("p",{children:[null==e?void 0:e.username,(0,a.jsxs)("time",{className:"block text-sm text-gray-500 dark:text-gray-400",children:["Posted on: ",null==e?void 0:e.createdAt.substring(0,10)]})]})})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center space-x-2 mb-2",children:[(0,a.jsx)("div",{className:"ratings",children:(0,a.jsx)(r.Z,{rating:null==e?void 0:e.rating,starRatedColor:"#ffb829",numberOfStars:5,starDimension:"18px",starSpacing:"1px",name:"rating"})}),(0,a.jsx)("span",{className:"text-yellow-500",children:null==e?void 0:e.rating})]}),(0,a.jsx)("p",{className:"mb-2 font-light text-gray-500 dark:text-gray-400 text-xl",children:null==e?void 0:e.comment})]},null==e?void 0:e._id)})})},x=e=>{var t,l;let{product:c}=e,{addItemToCart:d}=(0,s.useContext)(n.C),{canUserReview:u,canReview:v}=(0,s.useContext)(p.Z),x=(0,s.useRef)(null),g=e=>{x.current.src=e};(0,s.useEffect)(()=>{u(null==c?void 0:c._id)},[]);let b=(null==c?void 0:c.stock)>=1,f=()=>{d({product:c._id,name:c.name,price:c.price,image:c.images[0].url,stock:c.stock,seller:c.seller})};null==c||null===(t=c.name)||void 0===t||t.substring(0,100),null==c||c._id;let y=(0,i.Z)(c.createdAt),j=(0,o.Z)(y,{addSuffix:!0});return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("section",{className:"bg-white py-10",children:(0,a.jsxs)("div",{className:"container max-w-screen-xl mx-auto px-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8 mb-5",children:[(0,a.jsxs)("aside",{children:[(0,a.jsx)("div",{className:"border border-gray-200 shadow-sm p-3 text-center rounded mb-5",children:(0,a.jsx)("img",{ref:x,className:"object-cover inline-block",src:(null==c?void 0:c.images[0])?null==c?void 0:c.images[0].url:"/images/default_product.png",alt:"Product title",width:"340",height:"340"})}),(0,a.jsx)("div",{className:"space-x-2 overflow-auto text-center whitespace-nowrap",children:null==c?void 0:null===(l=c.images)||void 0===l?void 0:l.map(e=>(0,a.jsx)("a",{className:"inline-block border border-gray-200 p-1 rounded-md hover:border-blue-500 cursor-pointer",onClick:()=>g(null==e?void 0:e.url),children:(0,a.jsx)("img",{className:"w-14 h-14",src:e.url,alt:"Product title",width:"500",height:"500"})}))})]}),(0,a.jsxs)("main",{children:[(0,a.jsx)("h2",{className:"font-semibold text-2xl mb-4",children:null==c?void 0:c.name}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center space-x-2 mb-2",children:[(0,a.jsx)("div",{className:"ratings",children:(0,a.jsx)(r.Z,{rating:null==c?void 0:c.ratings,starRatedColor:"#ffb829",numberOfStars:5,starDimension:"20px",starSpacing:"2px",name:"rating"})}),(0,a.jsx)("span",{className:"text-yellow-500",children:null==c?void 0:c.ratings}),(0,a.jsx)("svg",{width:"6px",height:"6px",viewBox:"0 0 6 6",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("circle",{cx:"3",cy:"3",r:"3",fill:"#DBDBDB"})}),(0,a.jsx)("span",{className:"text-green-500",children:"Verified"})]}),(0,a.jsxs)("p",{className:"mb-4 font-semibold text-xl",children:["$",null==c?void 0:c.price]}),(0,a.jsx)("p",{className:"mb-4 text-gray-500",children:null==c?void 0:c.description}),(0,a.jsx)("p",{className:"mb-4 text-gray-500",children:j}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-5",children:(0,a.jsxs)("button",{className:"px-4 py-2 inline-block text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",onClick:f,disabled:!b,children:[(0,a.jsx)("i",{className:"fa fa-shopping-cart mr-2"}),"Add to cart"]})}),(0,a.jsxs)("ul",{className:"mb-5",children:[(0,a.jsxs)("li",{className:"mb-1",children:[" ",(0,a.jsx)("b",{className:"font-medium w-36 inline-block",children:"Stock"}),b?(0,a.jsx)("span",{className:"text-green-500",children:"In Stock"}):(0,a.jsx)("span",{className:"text-red-500",children:"Out of Stock"})]}),(0,a.jsxs)("li",{className:"mb-1",children:[" ",(0,a.jsx)("b",{className:"font-medium w-36 inline-block",children:"Category:"}),(0,a.jsx)("span",{className:"text-gray-500",children:null==c?void 0:c.category})]}),(0,a.jsxs)("li",{className:"mb-1",children:[" ",(0,a.jsx)("b",{className:"font-medium w-36 inline-block",children:"Seller / Brand:"}),(0,a.jsx)("span",{className:"text-gray-500",children:null==c?void 0:c.seller})]})]})]})]}),v&&(0,a.jsx)(m,{product:c}),(0,a.jsx)(m,{product:c}),(0,a.jsx)("hr",{}),(0,a.jsxs)("div",{className:"font-semibold",children:[(0,a.jsx)("h1",{className:"text-gray-500 review-title mb-6 mt-10 text-2xl",children:"Other Customers Reviews"}),(0,a.jsx)(h,{reviews:null==c?void 0:c.reviews})]})]})})})};var g=x},8073:function(e,t,l){"use strict";l.d(t,{H:function(){return o}});var a=l(1844),s=l(8433),r=l(9332),n=l(5784);let i=(0,n.createContext)(),o=e=>{let{children:t}=e,[l,o]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),[u,v]=(0,n.useState)(null),[m,p]=(0,n.useState)(!1),h=(0,r.useRouter)(),x=async e=>{let{name:t,email:l,password:a}=e;try{let{data:e}=await s.Z.post("".concat("http://localhost:3000","/api/auth/register"),{name:t,email:l,password:a});(null==e?void 0:e.user)&&h.push("/")}catch(e){var r,n;d(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.message)}},g=async()=>{try{v(!0);let{data:e}=await s.Z.get("/api/auth/session?update");(null==e?void 0:e.user)&&(o(e.user),h.replace("/me"))}catch(l){var e,t;d(null==l?void 0:null===(e=l.response)||void 0===e?void 0:null===(t=e.data)||void 0===t?void 0:t.message)}},b=async e=>{try{v(!0);let{data:t}=await s.Z.put("".concat("http://localhost:3000","/api/auth/me/update"),e,{headers:{"Content-Type":"multipart/form-data"}});(null==t?void 0:t.user)&&(g(),v(!1))}catch(e){var t,l;v(!1),d(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(l=t.data)||void 0===l?void 0:l.message)}},f=async e=>{let{currentPassword:t,newPassword:l}=e;try{let{data:e}=await s.Z.put("".concat("http://localhost:3000","/api/auth/me/update_password"),{currentPassword:t,newPassword:l});(null==e?void 0:e.success)&&h.replace("/me")}catch(e){var a,r;console.log(e.response),d(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)}},y=async(e,t)=>{try{let{data:l}=await s.Z.put("".concat("http://localhost:3000","/api/admin/users/").concat(e),{userData:t});(null==l?void 0:l.success)&&(p(!0),h.replace("/admin/users/".concat(e)))}catch(e){var l,a;d(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(a=l.data)||void 0===a?void 0:a.message)}},j=async e=>{try{let{data:t}=await s.Z.delete("".concat("http://localhost:3000","/api/admin/users/").concat(e));(null==t?void 0:t.success)&&h.replace("/admin/users")}catch(e){var t,l;d(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(l=t.data)||void 0===l?void 0:l.message)}},w=async e=>{try{let{data:t}=await s.Z.post("".concat("http://localhost:3000","/api/address"),e);t&&h.push("/me")}catch(e){var t,l;d(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(l=t.data)||void 0===l?void 0:l.message)}},N=async(e,t)=>{try{let{data:l}=await s.Z.put("".concat("http://localhost:3000","/api/address/").concat(e),t);(null==l?void 0:l.address)&&(p(!0),h.replace("/address/".concat(e)))}catch(e){var l,a;d(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(a=l.data)||void 0===a?void 0:a.message)}},S=async e=>{try{let{data:t}=await s.Z.delete("".concat("http://localhost:3000","/api/address/").concat(e));(null==t?void 0:t.success)&&h.push("/me")}catch(e){var t,l;d(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(l=t.data)||void 0===l?void 0:l.message)}},Z=()=>{d(null)};return(0,a.jsx)(i.Provider,{value:{user:l,error:c,loading:u,updated:m,updateUser:y,deleteUser:j,setUpdated:p,setUser:o,registerUser:x,updateProfile:b,updatePassword:f,addNewAddress:w,updateAddress:N,deleteAddress:S,clearErrors:Z},children:t})};t.Z=i},4561:function(e,t,l){"use strict";l.d(t,{Z:function(){return i}});var a=l(1844),s=l(9332),r=l(5784);let n=(0,r.createContext)(),i=e=>{let{children:t}=e,[l,i]=(0,r.useState)([]),o=(0,s.useRouter)();(0,r.useEffect)(()=>{c()},[]);let c=()=>{i(localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[])},d=async e=>{var t,a;let s,{product:r,name:n,price:i,image:o,stock:d,seller:u,quantity:v=1}=e,m={product:r,name:n,price:i,image:o,stock:d,seller:u,quantity:v},p=null==l?void 0:null===(t=l.cartItems)||void 0===t?void 0:t.find(e=>e.product===m.product);s=p?null==l?void 0:null===(a=l.cartItems)||void 0===a?void 0:a.map(e=>e.product===p.product?m:e):[...(null==l?void 0:l.cartItems)||[],m],localStorage.setItem("cart",JSON.stringify({cartItems:s})),c()},u=e=>{var t;let a=null==l?void 0:null===(t=l.cartItems)||void 0===t?void 0:t.filter(t=>t.product!==e);localStorage.setItem("cart",JSON.stringify({cartItems:a})),c()},v=e=>{let{amount:t,tax:a,totalAmount:s}=e,r={...l,checkoutInfo:{amount:t,tax:a,totalAmount:s}};localStorage.setItem("cart",JSON.stringify(r)),c(),o.push("/shipping")},m=()=>{localStorage.removeItem("cart"),c()};return(0,a.jsx)(n.Provider,{value:{cart:l,addItemToCart:d,saveOnCheckout:v,deleteItemFromCart:u,clearCart:m},children:t})};t.C=n},8747:function(e,t,l){"use strict";l.d(t,{u:function(){return o}});var a=l(1844),s=l(8433),r=l(9332),n=l(5784);let i=(0,n.createContext)(),o=e=>{let{children:t}=e,[l,o]=(0,n.useState)(null),[c,d]=(0,n.useState)(!1),[u,v]=(0,n.useState)(!1),m=(0,r.useRouter)(),p=async(e,t)=>{try{let{data:l}=await s.Z.put("".concat("http://localhost:3000","/api/admin/orders/").concat(e),t);l.success&&(d(!0),m.replace("/admin/orders/".concat(e)))}catch(e){var l,a;o(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(a=l.data)||void 0===a?void 0:a.message)}},h=async e=>{try{let{data:t}=await s.Z.delete("".concat("http://localhost:3000","/api/admin/orders/").concat(e));(null==t?void 0:t.success)&&m.replace("/admin/orders")}catch(e){var t,l;o(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(l=t.data)||void 0===l?void 0:l.message)}},x=async e=>{try{let{data:t}=await s.Z.get("".concat("http://localhost:3000","/api/orders/can_review?productId=").concat(e));(null==t?void 0:t.canReview)&&v(null==t?void 0:t.canReview)}catch(e){var t,l;o(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(l=t.data)||void 0===l?void 0:l.message)}},g=()=>{o(null)};return(0,a.jsx)(i.Provider,{value:{error:l,updated:c,canReview:u,canUserReview:x,setUpdated:d,updateOrder:p,deleteOrder:h,clearErrors:g},children:t})};t.Z=i},9190:function(e,t,l){"use strict";l.d(t,{G:function(){return o}});var a=l(1844),s=l(8433),r=l(9332),n=l(5784);let i=(0,n.createContext)(),o=e=>{let{children:t}=e,[l,o]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),[u,v]=(0,n.useState)(!1),m=(0,r.useRouter)(),p=async(e,t)=>{try{let{data:l}=await s.Z.put("".concat("http://localhost:3000","/api/admin/products/").concat(t),e);l&&(v(!0),m.replace("/admin/products/".concat(t)))}catch(e){var l,a;o(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(a=l.data)||void 0===a?void 0:a.message)}},h=async e=>{try{let{data:t}=await s.Z.post("".concat("http://localhost:3000","/api/admin/products"),e);t&&m.replace("/admin/products")}catch(e){var t,l;o(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(l=t.data)||void 0===l?void 0:l.message)}},x=async(e,t)=>{try{d(!0);let{data:l}=await s.Z.post("".concat("http://localhost:3000","/api/admin/products/upload_images/").concat(t),e,{headers:{"Content-Type":"multipart/form-data"}});(null==l?void 0:l.data)&&(d(!1),m.replace("/admin/products"))}catch(e){var l,a;o(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(a=l.data)||void 0===a?void 0:a.message)}},g=async e=>{try{let{data:t}=await s.Z.delete("".concat("http://localhost:3000","/api/admin/products/").concat(e));(null==t?void 0:t.success)&&m.replace("/admin/products")}catch(e){var t,l;o(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(l=t.data)||void 0===l?void 0:l.message)}},b=async e=>{try{let{data:t}=await s.Z.put("".concat("http://localhost:3000","/api/products/review"),e);(null==t?void 0:t.success)&&m.replace("/product/".concat(null==e?void 0:e.productId))}catch(e){var t,l;o(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(l=t.data)||void 0===l?void 0:l.message)}},f=()=>{o(null)};return(0,a.jsx)(i.Provider,{value:{error:l,loading:c,updated:u,setUpdated:v,newProduct:h,uploadProductImages:x,updateProduct:p,deleteProduct:g,postReview:b,clearErrors:f},children:t})};t.Z=i},8016:function(e,t,l){"use strict";l.d(t,{Bp:function(){return s},Eq:function(){return r},dk:function(){return a}});let a=(e,t,l)=>{let a=e.has(t);return l&&a?e.set(t,l):l?e.append(t,l):a&&e.delete(t),e},s=e=>{let t=e.replace(/%3A/g,":").replace(/%2F/g,"/");return t},r=(e,t)=>{let l=null;return e.forEach(e=>{var a;(null==e?void 0:null===(a=e.user)||void 0===a?void 0:a._id)===t&&(l=e)}),l}}},function(e){e.O(0,[996,79,17,744],function(){return e(e.s=6407)}),_N_E=e.O()}]);